<div class="admin-portfolio-page">
  <div class="portfolio-list-header">
    <div>
      <h1>Portfolio Projects</h1>
      <p>Manage projects displayed on the <a href="/portfolio" target="_blank">Portfolio page</a></p>
    </div>
    <a href="/admin/portfolio/new" class="portfolio-btn portfolio-btn--primary">
      <i class='bx bx-plus'></i> New Project
    </a>
  </div>

  {{#if flash.success}}
  <div class="portfolio-alert portfolio-alert--success"><i class='bx bx-check-circle'></i> {{flash.success}}</div>
  {{/if}}
  {{#if flash.error}}
  <div class="portfolio-alert portfolio-alert--error"><i class='bx bx-error-circle'></i> {{flash.error}}</div>
  {{/if}}

  {{#if projects.length}}
  <div class="portfolio-project-grid">
    {{#each projects}}
    <div class="portfolio-project-card">
      <div class="portfolio-project-image">
        {{#if this.image_url}}
        <img src="{{this.image_url}}" alt="{{this.title}}" />
        {{else}}
        <div class="portfolio-project-placeholder"><i class='bx bx-image'></i></div>
        {{/if}}
      </div>
      <div class="portfolio-project-body">
        <h3>{{this.title}}</h3>
        <p class="portfolio-project-desc">{{this.description}}</p>
        {{#if this.technology_stack.length}}
        <div class="portfolio-project-tags">
          {{#each this.technology_stack}}
          <span class="portfolio-tag">{{this}}</span>
          {{/each}}
        </div>
        {{/if}}
        <div class="portfolio-project-actions">
          <a href="/admin/portfolio/{{this.id}}/edit" class="portfolio-btn portfolio-btn--sm">Edit</a>
          <form method="POST" action="/admin/portfolio/{{this.id}}/delete" style="display:inline;" onsubmit="return confirm('Delete this project?');">
            <button type="submit" class="portfolio-btn portfolio-btn--danger-sm">Delete</button>
          </form>
        </div>
      </div>
    </div>
    {{/each}}
  </div>
  {{else}}
  <div class="portfolio-empty">
    <i class='bx bx-folder-open'></i>
    <h3>No portfolio projects yet</h3>
    <p>Add your first project to showcase on the Portfolio page.</p>
    <a href="/admin/portfolio/new" class="portfolio-btn portfolio-btn--primary">Add Project</a>
  </div>
  {{/if}}
</div>

<style>
  .admin-portfolio-page { --pf-bg: #f8fafc; --pf-surface: #fff; --pf-border: #e2e8f0; --pf-text: #1e293b; --pf-muted: #64748b; --pf-accent: #6366f1; --pf-danger: #dc2626; font-family: 'DM Sans', -apple-system, sans-serif; }
  .portfolio-list-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; margin-bottom: 24px; flex-wrap: wrap; }
  .portfolio-list-header h1 { font-size: 26px; font-weight: 700; color: var(--pf-text); margin: 0 0 4px; }
  .portfolio-list-header p { font-size: 14px; color: var(--pf-muted); margin: 0; }
  .portfolio-list-header a { color: var(--pf-accent); }
  .portfolio-btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; font-size: 14px; font-weight: 600; border-radius: 10px; text-decoration: none; border: none; cursor: pointer; font-family: inherit; transition: all 0.2s; }
  .portfolio-btn--primary { background: linear-gradient(135deg, var(--pf-accent), #8b5cf6); color: #ffffff !important; }
  .portfolio-btn--primary:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(99,102,241,0.4); color: #ffffff !important; }
  .portfolio-btn--sm { padding: 6px 12px; font-size: 13px; background: var(--pf-border); color: var(--pf-text); }
  .portfolio-btn--sm:hover { background: #cbd5e1; }
  .portfolio-btn--danger-sm { padding: 6px 12px; font-size: 13px; background: transparent; color: var(--pf-danger); border: 1px solid rgba(220,38,38,0.3); }
  .portfolio-btn--danger-sm:hover { background: #fef2f2; }
  .portfolio-alert { display: flex; align-items: center; gap: 10px; padding: 12px 16px; border-radius: 10px; margin-bottom: 20px; font-size: 14px; }
  .portfolio-alert--success { background: #ecfdf5; color: #065f46; }
  .portfolio-alert--error { background: #fef2f2; color: #991b1b; }
  .portfolio-project-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px; }
  .portfolio-project-card { background: var(--pf-surface); border-radius: 16px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.06); border: 1px solid var(--pf-border); transition: all 0.25s; }
  .portfolio-project-card:hover { box-shadow: 0 12px 40px rgba(0,0,0,0.1); }
  .portfolio-project-image { height: 180px; background: #f1f5f9; overflow: hidden; }
  .portfolio-project-image img { width: 100%; height: 100%; object-fit: cover; }
  .portfolio-project-placeholder { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-size: 48px; }
  .portfolio-project-body { padding: 20px; }
  .portfolio-project-body h3 { font-size: 18px; font-weight: 600; margin: 0 0 10px; color: var(--pf-text); }
  .portfolio-project-desc { font-size: 14px; color: var(--pf-muted); margin: 0 0 14px; line-height: 1.6; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
  .portfolio-project-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 14px; }
  .portfolio-tag { font-size: 11px; padding: 4px 10px; background: #eef2ff; color: var(--pf-accent); border-radius: 20px; }
  .portfolio-project-actions { display: flex; gap: 10px; }
  .portfolio-empty { text-align: center; padding: 60px 24px; background: var(--pf-surface); border-radius: 16px; border: 1px dashed var(--pf-border); }
  .portfolio-empty i { font-size: 56px; color: #cbd5e1; display: block; margin-bottom: 16px; }
  .portfolio-empty h3 { font-size: 20px; font-weight: 600; margin: 0 0 8px; color: var(--pf-text); }
  .portfolio-empty p { font-size: 14px; color: var(--pf-muted); margin-bottom: 20px; }
</style>
